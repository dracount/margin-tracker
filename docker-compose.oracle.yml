# Oracle Cloud Integration
#
# USAGE: Copy these services into your EXISTING docker-compose.yml on Oracle Cloud
# Then add the Caddyfile entry for the subdomain
#
# Services to add:
#   - margin_pocketbase (backend)
#   - margin_frontend (React app)
#
# Volumes to add:
#   - margin_pocketbase_data
#
# Network: Use your existing network (e.g., waha-net)

services:
  margin_pocketbase:
    image: adrianmusante/pocketbase:latest
    container_name: margin_pocketbase
    restart: unless-stopped
    volumes:
      - margin_pocketbase_data:/pocketbase
    networks:
      - waha-net

  margin_frontend:
    build:
      context: ./margin-tracker
      args:
        VITE_PB_URL: /api
    container_name: margin_frontend
    restart: unless-stopped
    networks:
      - waha-net

volumes:
  margin_pocketbase_data:

networks:
  waha-net:
    external: true
